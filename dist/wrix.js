!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wrix",[],t):"object"==typeof exports?exports.wrix=t():e.wrix=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var c=t[o]={i:o,l:!1,exports:{}};return e[o].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);const o=e=>null!==e&&null!==Object.getPrototypeOf(e),c=e=>"function"==typeof e,n=e=>t=>void 0===e[t],s=e=>{let t=u(e),r=Object.getPrototypeOf(e);do{t=t.concat(u(r).filter(e=>-1===t.indexOf(e))),r=Object.getPrototypeOf(r)}while(o(r));return t},i=(e,t=s(e),r={})=>t.reduce((t,o)=>(e=e,o=o,r=t,Object.defineProperty(r,o,{get:function(){return e[o]}}),t),r);var f,l,p;const u=e=>Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e).map(e=>e.toString())).filter(t=>!!Object.getOwnPropertyDescriptor(e,t).get),a=e=>{let t=y(e),r=Object.getPrototypeOf(e);do{t=t.concat(y(r).filter(e=>-1===t.indexOf(e))),r=Object.getPrototypeOf(r)}while(o(r));return t},y=e=>Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e).map(e=>e.toString())).filter(t=>!!Object.getOwnPropertyDescriptor(e,t).set),O=(e={})=>{let t=b(e),r=Object.getPrototypeOf(e);do{t=t.concat(b(r).filter(e=>-1===t.indexOf(e))),r=Object.getPrototypeOf(r)}while(o(r));return t},b=e=>Object.keys(e).filter(t=>d(t,e)),d=(e,t)=>{const r=Object.getOwnPropertyDescriptor(t,e);return!!g(r)&&!c(t[e])},g=e=>e.configurable&&!e.get&&!e.set,j=e=>a(e).concat(O(e)),h=(e,t=j(e),r={})=>t.reduce((t,r)=>(t[r]=((e,t,r)=>o=>(e[t]=o,r))(e,r,t),t),r),w=e=>{let t=x(e),r=Object.getPrototypeOf(e);do{t=t.concat(m(r).filter(e=>-1===t.indexOf(e))),r=Object.getPrototypeOf(r)}while(o(r));return t},m=e=>x(e).filter((e,t,r)=>0===t||e!==r[t-1]),x=e=>Object.getOwnPropertyNames(e).concat(Object.keys(e)).concat(Object.getOwnPropertySymbols(e).map(e=>e.toString())).filter(t=>c(e[t])&&"constructor"!==t&&!Object.getOwnPropertyDescriptor(e,t).get),P=({methods:e={},getters:t={},setters:r={},props:o={},configurables:c={}}={},f={},l=_)=>{let p={methods:e,getters:t,setters:r,props:o,configurables:c},u=Object.assign({},f);!0===l&&(l=v);let y=j(p.configurables).filter(l).filter(n(p.methods));u=h(p.configurables,y,u);let b=w(p.methods).filter(l).filter(n(u));u=((e,t=w(e),r={})=>t.reduce((t,r)=>(t[r]=((e,t,r)=>{const o=e[t];return function(...t){let c=o.apply(e,t);return void 0===c?r:c}})(e,r,t),t),r))(p.methods,b,u);let d=O(p.props).filter(l).filter(n(u));u=((e,t=O(e),r={})=>h(e,t,r))(p.props,d,u);let g=a(p.setters).filter(l).filter(n(u));u=((e,t=a(e),r={})=>h(e,t,r))(p.setters,g,u);let m=s(p.getters).filter(l).filter(n(u));return u=i(p.getters,m,u)},_=e=>"_"!==e.charAt(0),v=()=>!0,k=e=>{let t=Object.assign({},e),r={$consumed:t};return Object.keys(e).forEach(e=>{Object.defineProperty(r,e,{get:function(){let r=t[e];return t[e]=void 0,delete t[e],r}})}),r},E=(e,t=!0)=>e?A().wrap(t?Object.create(e):e).wrix():A(),S={wrapper:null,consume:k,wrix(){return this.wrapper},compose(e,t,r){this.wrapper=P(e,t,r)},set(e){((e,t)=>{Object.keys(t).reduce((e,r)=>e[r]&&"function"==typeof e[r]?e[r](t[r]):e,e)})(this.wrapper||{},e)},wrap(e,t,r){this.wrapper=((e,t,r)=>P({methods:e,props:e,setters:e,getters:e},t,r))(e,t,r)}},A=()=>P({methods:Object.create(S)}),D=(e=M,t,r)=>t?e(...F(t,r)):e(r),N={object:(e=M,t,r)=>Object.create(D(e,t,r)),prototype:(e=M,t,r)=>Object.create(D(e,t,r).prototype),class:(e=Object,t,r)=>t?new e(...F(t,r)):new e(r),static:D},F=(e=[],t)=>e.map(e=>t[e]).filter(e=>void 0!==e),M=()=>{},$=e=>e?z.create(e):z,C={_factories:{},create({key:e,type:t,factoryFn:r,factoryArgs:o,behaviours:c,keyContext:n}){this._factoryExists(e)||(this._factories[e]=q(r,t,n||e,o,c))},get(e,t){return this._factoryExists(e)?this._factories[e](t):null},destroy(e){this._factoryExists(e)&&(this._factories[e]=null,delete this._factories[e])},_factoryExists(e){return void 0!==this._factories[e]},get keys(){return Object.keys(this._factories)},destroyAll(){this.keys.forEach(e=>this.destroy(e))}},q=(e,t,r="_",o=null,c=null)=>(n={})=>{let s=k(n),i=((e,...t)=>N[e]?N[e](...t):N.object(...t))(t,e,o,s),f=G(r,i);return(Array.isArray(c)?E().compose({methods:B(c,i),configurables:i},f):E().wrap(i,f)).set(s.$consumed).wrix()},z=P({methods:C,getters:C},{factory:C}),B=(e,t)=>e.reduce((e,r)=>Object.assign(e,r(t,e)),{}),G=(e,t)=>{let r={};return"string"==typeof e&&e.length>0&&(r[e]=t),r};r.d(t,"wrix",function(){return E}),r.d(t,"wrixFactory",function(){return $})}])});